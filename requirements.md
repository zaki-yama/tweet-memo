# Twitter風つぶやきCLI 要件定義

## 概要
ターミナルでTwitterのつぶやきのような短いテキストを入力すると、指定したMarkdownファイルの特定セクションにタイムスタンプ付きで記録するCLIツールを作成する。

## 技術要件
- **言語**: Rust
- **配布形式**: バイナリ実行ファイル
- **対象OS**: クロスプラットフォーム（Linux, macOS, Windows）

## 機能要件

### 基本機能
1. **テキスト入力**: コマンドライン引数またはインタラクティブモードでテキストを受け取る
2. **ファイル書き込み**: 指定されたMarkdownファイルにタイムスタンプ付きでテキストを追記
3. **設定ファイル**: ユーザーがカスタマイズ可能な設定ファイルを読み込む

### 設定可能項目
以下の項目を設定ファイル（TOML形式推奨）でカスタマイズ可能にする：
- **対象ディレクトリのパス**: Markdownファイルを保存するディレクトリ
- **対象ファイル名のフォーマット**: 日付ベースのファイル名（デフォルト: `YYYY-MM-DD.md`）
- **書き込みフォーマット**: タイムスタンプとテキストの表示形式（デフォルト: `[HH:mm:ss] {text}`）
- **対象セクション**: Markdownファイル内の追記対象セクション（デフォルト: `### Tweets`）

## 使用例

### コマンドライン使用例
```bash
# 直接テキストを指定
tw "今日は良い天気だ"

# インタラクティブモード
tw
> 今日は良い天気だ
```

### 出力例
対象ファイル（例: `2024-01-15.md`）の`### Tweets`セクション末尾に以下のようにリスト形式で追記される：
```markdown
### Tweets

- [14:30:25] 今日は良い天気だ
```

## 設定ファイル例
```toml
# ~/.config/tw/config.toml
[settings]
target_directory = "~/Documents/daily-notes"
filename_format = "YYYY-MM-DD.md"
entry_format = "[HH:mm:ss] {text}"
target_section = "### Tweets"
```

## 技術的詳細

### 必要なクレート（推奨）
- `clap`: コマンドライン引数解析
- `serde`: 設定ファイル読み込み
- `toml`: TOML形式の設定ファイル
- `chrono`: 日付・時刻操作
- `dirs`: ユーザーディレクトリ取得

### ディレクトリ構造
```
tw/
├── src/
│   ├── main.rs
│   ├── config.rs
│   └── writer.rs
├── Cargo.toml
└── README.md
```

## 実装時の考慮点

1. **Markdownセクション処理**: 指定されたセクション（例：`### Tweets`）を検索し、その末尾にリスト形式で追記
2. **ファイル作成**: 対象ファイルが存在しない場合はエラー
3. **ディレクトリ作成**: 対象ディレクトリが存在しない場合はエラー
4. **エラーハンドリング**: 適切なエラーメッセージの表示
5. **設定ファイル**: 初回実行時に`~/.config/tw/config.toml`にデフォルト設定ファイルを生成
6. **文字エンコーディング**: UTF-8での読み書き
7. **権限チェック**: ファイル書き込み権限の確認

## 追加機能（オプション）
- 複数行テキストの入力サポート
- 過去のエントリーの検索機能
- 設定ファイルの場所をコマンドライン引数で指定可能
- ヘルプメッセージの日本語対応
